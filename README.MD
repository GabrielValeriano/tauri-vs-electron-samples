# Examples for comparison between the frameworks Tauri and Electron <!-- omit in toc -->

Small applications made for comparing the frameworks Tauri and Electron.

This repository is an adaptation of the comparisons made by Gordon H. in the
article
["macOS Performance Comparison: Flutter Desktop vs. Electron"](https://getstream.io/blog/flutter-desktop-vs-electron/),
and is **heavily** based on the repository
[HayesGordon/flutter-desktop-vs-electron-samples](https://github.com/HayesGordon/flutter-desktop-vs-electron-samples).

:brazil: **[Clique aqui para ler em portuguÃªs](./README.pt-br.md)** :brazil:

## Index <!-- omit in toc -->

- [Prerequisites](#prerequisites)
- [Compiling the projects with the automation script](#compiling-the-projects-with-the-automation-script)
  - [Linux](#linux)
  - [Windows](#windows)
  - [Compiling and running the projects manually](#compiling-and-running-the-projects-manually)
  - [Tauri Projects](#tauri-projects)
  - [Electron projects](#electron-projects)
- [Applications in this repository](#applications-in-this-repository)
  - [Hello World](#hello-world)
  - [Image Demo](#image-demo)
  - [Lottie Demo](#lottie-demo)
- [Note about workspaces](#note-about-workspaces)

## Prerequisites

To run the projects below, you need to install
[Node.js and NPM](https://nodejs.org/en/download/package-manager/),
and [the Rust language compiler](https://www.rust-lang.org/learn/get-started).

## Compiling the projects with the automation script

The project root contains scripts that automatically download each project's
dependencies, build their installers, show a report of time elapsed for each
step, and put the installers on the folders `build/electron` and `build/tauri`.

### Linux

The script [build.sh](/build.sh) uses the Bash command interpreter and is made
for operating systems/Linux distributions that use Debian packages (`.deb`) to
install their applications. It can be run using one of the following methods:

```sh
# Running it with Bash directly
bash build.sh
```

Or

```sh
# Grant executable permission to the script
chmod +x build.sh
# Then run it
./build.sh
```

### Windows

The script [build.ps1](/build.ps1) was made to be run in the Windows operating
system using PowerShell. Run it with the following command:

```powershell
.\build.ps1
```

**Notice**: The execution policy might need to be changed so that PowerShell
may run this script successfully. To do this, run this command:

```powershell
Set-ExecutionPolicy Bypass -Scope Process
```

And then try to run the script.

This command configures the execution policy so that whatever script can be run
(`Bypass`) during the current PowerShell session (`-Scope Process`).

After running the script, closing and opening the terminal again resets the
configuration made by the command above.

More information:
[about_Execution_Policies (Microsoft)](https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_execution_policies?view=powershell-5.1)

### Compiling and running the projects manually

It is possible to run the projects manually as well. To do this, change
directories to the root of each project and run the adequate commands.

Before doing so, install each project's dependencies:

```sh
# Change the path below for the correct one
cd directory/of_Tauri/or_Electron/Project

# This installs the dependencies
npm install
```

### Tauri Projects

```sh
# Runs the application in the development environment:
npm run tauri dev

# Builds installers for the app:
npm run tauri build
```

Files generated by the `tauri build` command are in `{repository root}/target/release/bundle`.

- Linux: `{repository root}/target/release/bundle/deb/`, `.deb` files (for Linux distributions that use Debian packages)

- Windows: `{repository root}/target/release/bundle/msi/`, `.msi` files

### Electron projects

```sh
# Runs the application in the development environment:
npm run start

# Builds installers for the app:
npm run make
```

Files generated by the `make` command are in `{electron project root}/out/make`.

- Linux: `{electron project root}/out/make/deb/x64/`, `.deb` files. (_if_ `.deb` packages were made).
- Windows: `{electron project root}/out/make/squirrel.windows/x64/`, `.exe` files.

On Linux, specifying the `--targets` parameter on the `make` command may be
necessary to make it work. For instance:

```sh
npm run make -- --targets=@electron-forge/maker-deb
```

By doing this, compiling to other distributions not based on Debian and using your
own compiler with Electron Forge is also possible. More information on the
[Official Documentation](https://www.electronforge.io/cli#make).

## Applications in this repository

### Hello World

Application that shows the text "Hello World!" on the screen.

- Tauri: [/hello-world/tauri-hello-world/](/hello-world/tauri-hello-world/)
- Electron: [/hello-world/electron-hello-world/](/hello-world/electron-hello-world/)

### Image Demo

Application that loads many images on the screen from the website [Lorem Picsum](https://picsum.photos/)

- Tauri: [/image-demo/tauri-image-demo/](/image-demo/tauri-image-demo/)
- Electron: [/image-demo/electron-image-demo/](/image-demo/electron-image-demo/)

### Lottie Demo

Application that loads many [Lottie](http://airbnb.io/lottie) animations stored in JSON files.

- Tauri: [/lottie-demo/tauri-lottie-demo/](/lottie-demo/tauri-lottie-demo/)
- Electron: [/lottie-demo/electron-lottie-demo/](/lottie-demo/electron-lottie-demo/)

## Note about workspaces

The Cargo packages in this repository are all in the same
[Cargo workspace](https://doc.rust-lang.org/book/ch14-03-cargo-workspaces.html),
this can be seen in [Cargo.toml](/Cargo.toml). This was done to save time, as
downloading the dependencies for all these packages can be done once.

However, the NPM packages are not in one
[NPM workspace](https://docs.npmjs.com/cli/v7/using-npm/workspaces), because
Electron Forge, when running the `package` command inside a workspace, cannot find
(without further configuration and more dependencies) the Electron executable,
since it is not in the package's root anymore.

Because of this, all NPM dependencies need to be downloaded separately and
repeatedly (like in the automation script), and all Cargo dependencies are
downloaded at the same time and only once on the first `build` command (in this
case, `tauri build`).
